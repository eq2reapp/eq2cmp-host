(function(e){function t(t){for(var r,i,n=t[0],l=t[1],c=t[2],u=0,v=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(v.length)v.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},o={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"2e05":function(e,t,a){"use strict";a("e9ab")},"2e46":function(e,t,a){"use strict";a("5ba9")},"42df":function(e,t,a){"use strict";a("96a7")},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),o=a("8c4f"),s=a("5f35"),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Main",{attrs:{version:e.version}})],1)},n=[],l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"content"},[t("div",{staticClass:"header"},[t("h1",[t("a",{staticClass:"link-light",attrs:{href:"#",onclick:"window.location.reload(true);"}},[e._v("EQ2 Compare")]),e.link?t("a",{staticClass:"link-primary",attrs:{href:e.link}},[t("font-awesome-icon",{attrs:{icon:["fas","share-square"]}})],1):e._e()]),t("div",{staticClass:"links"},[t("router-link",{attrs:{to:"/"}},[e._v("Compare")]),t("router-link",{attrs:{to:"/group"}},[e._v("Groups")]),t("router-link",{attrs:{to:"/report"}},[e._v("Report")])],1)]),e.hasApiError?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" There was a problem connecting to the EQ2 Census API. ")]):e._e(),t("router-view",{on:{apiError:e.apiError,apiSearch:e.apiSearch,newLink:e.newLink}})],1),t("div",{staticClass:"footer"},[t("div",{staticClass:"row"},[t("div",{staticClass:"d-flex justify-content-between"},[e._m(0),t("div",{staticClass:"version-string"},[e._v("v"+e._s(e.version)+" "),t("a",{attrs:{href:"javascript:void(0);"},on:{click:e.clearStorage}},[e._v("(Clear stored data)")])])])])])])},c=[function(){var e=this,t=e._self._c;return t("div",[t("a",{attrs:{href:"https://github.com/eq2reapp/eq2cmp-host/issues",target:"_blank"}},[e._v("Report an issue or make a suggestion for this site")])])}],d=(a("caad"),a("eb11")),u=a.n(d);const v="group.__keys";function h(){var e=[],t=0;for(const i in localStorage)if(i.startsWith("c.player.")){var a,r;const o=JSON.parse(f(i)),s=Date.now()/1e3,n=604800;(null!==(a=o.fetchTime)&&void 0!==a?a:0)>s||s-(null!==(r=o.fetchTime)&&void 0!==r?r:0)>n?localStorage.removeItem(i):(t++,e.push({key:i,fetchTime:o.fetchTime}))}const o=40;if(t>o){e.sort((e,t)=>e.fetchTime<t.fetchTime?-1:e.fetchTime>t.fetchTime?1:0);for(var s=0;s<e.length-o;s++){const t=e[s].key;localStorage.removeItem(t)}}}function p(){for(const e in localStorage)(e.startsWith("c.player.")||e.startsWith("c.item."))&&localStorage.removeItem(e)}function m(e,t){const a=u.a.compress(t),r="c."+e;try{localStorage.removeItem(r),localStorage.setItem(r,a)}catch(o){console.error(o);const e=(new Blob(Object.values(localStorage)).size/1e6).toFixed(2);console.warn(`Storage space exceeded: ${e} MB. Pruning old stored players to clear space`),h();try{localStorage.setItem(r,a)}catch(o){console.error("Second storage attempt failed for "+r)}}}function f(e){const t=localStorage.getItem(e);return t?u.a.decompress(t):null}function g(e){const t=localStorage.getItem("app.compressedStorage");if(!t){console.warn("This app now uses compressed storage. Any existing cached data will now be cleared.");const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a==v||a.startsWith("c.")||a.startsWith("group.")||e.push(a)}for(const t of e)localStorage.removeItem(t);try{localStorage.setItem("app.compressedStorage","true")}catch(a){console.error(a)}}return f("c."+e)}function b(){const e=[];let t=localStorage.getItem(v);if(t){t=JSON.parse(t);const a=[];t.forEach(t=>{if(!a.includes(t)){let r=localStorage.getItem(t);r&&e.push(JSON.parse(r)),a.push(t)}})}return e}function _(e){for(const t of b())if(t.name==e)return t;return null}function C(e){return null!=_(e)}function y(e){let t=b();const a=A(t,e);a>=0&&(localStorage.removeItem(S(e)),t.splice(a,1),k(t))}function w(e,t){if(e.length<1)return this.message="You must provide a group name.",!1;C(e)&&y(e);const a={key:S(e),name:e,ids:t};localStorage.setItem(a.key,JSON.stringify(a));const r=b();return r.push(a),k(r),!0}function k(e){const t=JSON.stringify(e.map(e=>e.key));try{localStorage.setItem(v,t)}catch(a){console.error("Could not save group keys in local storage: "+a)}}function S(e){return"group."+e.replace(/\s/g,"")}function A(e,t){for(let a=0;a<e.length;a++)if(e[a].name==t)return a;return-1}var O={name:"Main",data:function(){return{link:"",hasApiError:!1}},props:["version"],methods:{apiError:function(){this.hasApiError=!0},apiSearch:function(){this.hasApiError=!1},newLink:function(e){this.link=e},clearStorage(){confirm("Clearing stored data will make room for new data. Clear stored data now?")&&p()}}},N=O,G=(a("8a08"),a("2877")),x=Object(G["a"])(N,l,c,!1,null,"0e2f53a3",null),R=x.exports,I=a("cee4"),P={name:"App",data:function(){return{version:""}},components:{Main:R},methods:{async getVersion(){var e="",t=`${location.origin}${s["publicPath"]}version.html`;try{e=(await I["a"].get(t)).data.trim()}catch(a){console.error(a)}return e}},async mounted(){this.version=await this.getVersion()}},$=P,L=(a("c12f"),Object(G["a"])($,i,n,!1,null,null,null)),T=L.exports,B=a("2f62");function F(e,t){e.items[t.id]=t}function E(e,t){e.spells[t.id]=t}function D(e,t){e.achievements[t.id]=t}function W(e,t){e.collections[t.id]=t}function M(e,t){e.players[t.id]=t;const a=`${t.server}.${t.name}`;e.players[a]=t}r["a"].use(B["a"]);var j=new B["a"].Store({state:{items:{},spells:{},achievements:{},collections:{},players:{}},getters:{getItem:e=>t=>{let a=void 0;if(t&&(a=e.items[t],!a)){const r=g("item."+t);r&&(a=JSON.parse(r),F(e,a))}return a},getSpell:e=>t=>{let a=void 0;if(t&&(a=e.spells[t],!a)){const r=g("spell."+t);r&&(a=JSON.parse(r),E(e,a))}return a},getAchievement:e=>t=>{let a=void 0;if(t&&(a=e.achievements[t],!a)){const r=g("achievement."+t);r&&(a=JSON.parse(r),D(e,a))}return a},getCollection:e=>t=>{let a=void 0;if(t&&(a=e.collections[t],!a)){const r=g("achievement."+t);r&&(a=JSON.parse(r),W(e,a))}return a},getPlayerById:e=>t=>{let a=void 0;if(t&&(a=e.players[t],!a)){const r=g("player."+t);r&&(a=JSON.parse(r),M(e,a))}return a},getPlayerByName:e=>(t,a)=>{let r=void 0;const o=`${t}.${a}`;if(r=e.players[o],!r){const t=g("player."+o);t&&(r=JSON.parse(t),M(e,r))}return r}},mutations:{addItem(e,t){null==(null===t||void 0===t?void 0:t.id)||Object.prototype.hasOwnProperty.call(e.items,t.id)||(F(e,t),m("item."+t.id,JSON.stringify(t)))},addSpell(e,t){null==(null===t||void 0===t?void 0:t.id)||Object.prototype.hasOwnProperty.call(e.spells,t.id)||(E(e,t),m("spell."+t.id,JSON.stringify(t)))},addAchievement(e,t){null==(null===t||void 0===t?void 0:t.id)||Object.prototype.hasOwnProperty.call(e.achievements,t.id)||(D(e,t),m("achievement."+t.id,JSON.stringify(t)))},addCollection(e,t){null==(null===t||void 0===t?void 0:t.id)||Object.prototype.hasOwnProperty.call(e.collections,t.id)||(W(e,t),m("collection."+t.id,JSON.stringify(t)))},addOrReplacePlayer(e,t){if(null!=(null===t||void 0===t?void 0:t.id)){Object.prototype.hasOwnProperty.call(e.players,t.id)&&delete e.players[t.id],M(e,t);const r=JSON.stringify(t);try{let e="player."+t.id;m(e,r),e=`player.${t.server}.${t.name}`,m(e,r)}catch(a){console.error(a)}}}},actions:{},modules:{}}),J=a("ecee"),q=a("c074"),H=a("b702"),U=a("ad3d"),Q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm"},[t("CharSelector",{attrs:{serverHint:e.suggestCharPart(0,"server"),charHint:e.suggestCharPart(0,"name"),autoload:e.autoload},on:{apiError:function(t){return e.apiError()},apiSearch:function(t){return e.apiSearch()},charFound:t=>e.charFound(0,t)}}),e.chars[0]?t("div",[t("CharStats",{attrs:{char:e.chars[0]}})],1):e._e(),e.charsMessages[0]?t("div",{staticClass:"alert alert-warning"},[e._v(e._s(e.charsMessages[0]))]):e._e()],1),t("div",{staticClass:"col-sm"},[t("CharSelector",{attrs:{serverHint:e.suggestCharPart(1,"server"),charHint:e.suggestCharPart(1,"name"),autoload:e.autoload},on:{apiError:function(t){return e.apiError()},apiSearch:function(t){return e.apiSearch()},charFound:t=>e.charFound(1,t)}}),e.chars[1]?t("div",[t("CharStats",{attrs:{char:e.chars[1]}})],1):e._e(),e.charsMessages[1]?t("div",{staticClass:"alert alert-warning"},[e._v(e._s(e.charsMessages[1]))]):e._e()],1)])},Z=[],z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"char-selector"},[t("div",{staticClass:"input-group"},[t("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.server,expression:"server",modifiers:{trim:!0}}],staticClass:"form-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.server=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"Antonia Bayle"}},[e._v("Antonia Bayle")]),t("option",{attrs:{value:"Halls of Fate"}},[e._v("Halls of Fate")]),t("option",{attrs:{value:"Isle of Refuge"}},[e._v("Isle of Refuge")]),t("option",{attrs:{value:"Kaladim"}},[e._v("Kaladim")]),t("option",{attrs:{value:"Maj'Dul"}},[e._v("Maj'Dul")]),t("option",{attrs:{value:"Rivervale"}},[e._v("Rivervale")]),t("option",{attrs:{value:"Skyfire"}},[e._v("Skyfire")]),t("option",{attrs:{value:"Thurgadin"}},[e._v("Thurgadin")])]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.charName,expression:"charName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Character"},domProps:{value:e.charName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchStats.apply(null,arguments)},input:function(t){t.target.composing||(e.charName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),t("input",{staticClass:"btn btn-primary",attrs:{id:"search-button",type:"button",value:e.getButtonText,disabled:e.getButtonDisabled},on:{click:e.fetchStats}})])])},K=[];const V=I["a"].create({baseURL:"https://census.daybreakgames.com/s:eq2cmp/json/get/eq2",timeout:15e3}),Y=I["a"].create({baseURL:"https://eq2reappapi.mooo.com/json/get/eq2",timeout:15e3});function X(e,t=0){return parseFloat(e.toFixed(t))}async function ee(e){var t=null,a=0;const r=3;do{try{var o=await Y.get(e);t=o.data}catch{a++,a<=r&&console.warn(`Retrying proxy (${a}/${r})`)}}while(null==t&&a<=r);if(null==t){console.warn("Proxy is unresponsive, attempting direct");try{o=await V.get(e),t=o.data}catch(s){throw console.error(s),"service_unavailable"}}return t}async function te(e){if(!e)return{};let t=j.getters.getItem(e);var a,r;t||(t=null===(a=await ee("/item/"+e))||void 0===a||null===(r=a.item_list)||void 0===r?void 0:r[0],t?j.commit("addItem",t):console.error("Unable to fetch item with id = "+e));return t}async function ae(e){if(!e)return"";let t=j.getters.getAchievement(e);var a,r,o,s;t||(t=null===(a=await ee("/achievement/"+e))||void 0===a||null===(r=a.achievement_list)||void 0===r?void 0:r[0],t?(t.description=t.desc,t.steps=null!==(o=t.event_list)&&void 0!==o?o:[],t.stepCount=(null!==(s=t.event_list)&&void 0!==s?s:[]).length,j.commit("addAchievement",{name:t.name,description:t.description,id:t.id,steps:t.steps,stepCount:t.stepCount})):console.error("Unable to fetch achievement with id = "+e));return t}async function re(e){const t=[];if(e){let i=null;i=isNaN(e)?await ee(`/achievement/?name=*${encodeURIComponent(e)}&c:limit=100&c:case=false&c:sort=name`):await ee(`/achievement/?id=${encodeURIComponent(e)}&c:limit=100&c:sort=name`);for(const e of null!==(a=null===(r=i)||void 0===r?void 0:r.achievement_list)&&void 0!==a?a:[]){var a,r,o,s;t.push({name:e.name,description:e.desc,id:e.id,steps:null!==(o=e.event_list)&&void 0!==o?o:[],stepCount:(null!==(s=e.event_list)&&void 0!==s?s:[]).length})}}return t}async function oe(e){if(!e)return"";let t=j.getters.getCollection(e);var a,r,o,s;t||(t=null===(a=await ee("/collection/"+e))||void 0===a||null===(r=a.collection_list)||void 0===r?void 0:r[0],t?(t.items=null!==(o=t.reference_list)&&void 0!==o?o:[],t.itemCount=(null!==(s=t.reference_list)&&void 0!==s?s:[]).length,j.commit("addCollection",{name:t.name,category:t.category,id:t.id,items:t.items,itemCount:t.itemCount})):console.error("Unable to fetch collection with id = "+e));return t}async function se(e){const t=[];if(e){let i=null;i=isNaN(e)?await ee(`/collection/?name=*${encodeURIComponent(e)}&c:limit=100&c:case=false`):await ee(`/collection/?id=${encodeURIComponent(e)}&c:limit=100`);for(const e of null!==(a=null===(r=i)||void 0===r?void 0:r.collection_list)&&void 0!==a?a:[]){var a,r,o,s;t.push({name:e.name,category:e.category,id:e.id,items:null!==(o=e.reference_list)&&void 0!==o?o:[],itemCount:(null!==(s=e.reference_list)&&void 0!==s?s:[]).length})}}return t}function ie(e,t,a){return e.startsWith(t)?parseInt(e.substring(e.indexOf(a)+a.length).replace(",","")):0}function ne(e,t,a){return ce(e,t,a,"Equipped")}function le(e,t,a){return ce(e,t,a,"Activated")}function ce(e,t,a,r=""){var o,s=0;const i=null!==(o=e.effect_list)&&void 0!==o?o:[];var n=!1;for(const c of i){var l;const e=c.description,o=null!==(l=c.indentation)&&void 0!==l?l:0;if(0==o){if(s=ie(e,t,a),s>0)break;n=e.includes(r)}else if(1==o&&n&&(s=ie(e,t,a),s>0))break}return X(s)}function de(e,t){var a=e.substring(0,1).toUpperCase()+e.substring(1),r=t.toLowerCase();return`/character/?name.first_lower=${r}&locationdata.world=${a}&c:limit=2&c:sort=type.level:-1`}function ue(e){return"/character/?id="+e}const ve=["purple","cyan","white","green"],he=[4247388578],pe=[3841788052,2113165614,3423186726,914812058,264900342,753591392,1011465144,263283712,4079471332],me=["Incandescent ","Budding Botanist's ","Delta ","Ensorcelled Badlands ","Ensorcelled Hizite ","Mesa ","Overgrowth ","Plateaus ","Scavenger's ","Takish ","Tishan's Zimaran ","Zimaran ","Planar "],fe=["[Level 120] Minion's ","[Level 125] Minion's ","D'Morte ","Extended D'Morte ","Libant ","Extended Libant ","Ring ","Extended Ring ","Zimaran ","Extended Zimaran "];function ge(e){var t,a;if(he.includes(e.id))return!1;if(pe.includes(e.id))return!0;const r=null!==(t=null===e||void 0===e||null===(a=e.typeinfo)||void 0===a?void 0:a.color)&&void 0!==t?t:"";if("purple"==r)return!0;if("white"==r){for(const o of me)if(e.displayname.startsWith(o))return!0}else if("temporary"==r)for(const o of fe)if(e.displayname.startsWith(o))return!0;return!1}async function be(e){const t=Date.now()/1e3;let a=j.getters.getPlayerById(e);if(a){var r;const e=null!==(r=a.fetchTime)&&void 0!==r?r:0;(e>t||t-e>600)&&(a=null)}return a||(a=await Re(ue(e)),a.fetchTime=t,j.commit("addOrReplacePlayer",a)),a}async function _e(e,t){let a=await Re(de(e,t));return a.fetchTime=Date.now(),j.commit("addOrReplacePlayer",a),h(),a}function Ce(){return{id:"",name:"",server:"",class:"",guild:"",guildId:"",mount:"",mountId:"",familiar:"",familiarId:"",multiplier:0,castSpeed:{total:0},reuse:{total:0},adc:{total:0},resolve:{total:0,gear:0,other:0},potency:{total:0,mount:0,mountBuff:0,bardings:0,familiar:0,gear:0,adorns:0,foodDrink:0,aas:0,preorderPet:0,flawless:0,rorPuppy:0,other:0},cb:{total:0,gear:0,adorns:0,foodDrink:0,aas:0,guildBuff:421,divineBuff:300,other:0},cbOvercap:{total:0,base:5e3,familiar:0,mount:0,gear:0,adorns:0,foodDrink:0,aas:0,flawless:0,divineBuff:150,other:0},fervor:{total:0,gear:0,adorns:0,flawless:0,divineBuff:46.5,other:0},fervorOvercap:{total:0,gear:0,adorns:0,foodDrink:0,flawless:0,divineBuff:46.5,other:0},adorns:{blue:[],red:[],purple:[],green:[],cyan:[],white:[],temporary:[],unknown:[]},gear:{primary:ye(),secondary:ye(),head:ye(),chest:ye(),shoulders:ye(),forearms:ye(),hands:ye(),legs:ye(),feet:ye(),left_ring:ye(),right_ring:ye(),ears:ye(),ears2:ye(),neck:ye(),left_wrist:ye(),right_wrist:ye(),ranged:ye(),waist:ye(),cloak:ye(),activate1:ye(),activate2:ye(),event_slot:ye()},achievements:[],collections:[],checkup:{emptyAdorns:0,oldAdorns:0,rendingAdorns:"",plumage:"None",messages:[]}}}function ye(){return{amount:0,tier:"",id:0,iconId:0,name:"",cboc:!1,adorns:{red:{count:0},blue:{count:0},green:{count:0},white:{count:0},cyan:{count:0},purple:{count:0}}}}async function we(e,t){var a,r,o,s,i,n,l,c,d,u,v,h,p,m,f,g,b,_,C,y,w,k,S,A,O,N,G,x,R;e.id=t.id,e.name=t.name.first,e.server=t.locationdata.world,e.class=t.type.class,e.guild=null!==(a=null===(r=t.guild)||void 0===r?void 0:r.name)&&void 0!==a?a:"",e.guildId=null!==(o=null===(s=t.guild)||void 0===s?void 0:s.id)&&void 0!==o?o:0,e.castSpeed.total=null!==(i=null===(n=t.stats)||void 0===n||null===(l=n.ability)||void 0===l?void 0:l.spelltimecastpct)&&void 0!==i?i:0,e.reuse.total=null!==(c=null===(d=t.stats)||void 0===d||null===(u=d.ability)||void 0===u?void 0:u.spelltimereusepct)&&void 0!==c?c:0,e.adc.total=null!==(v=null===(h=t.stats)||void 0===h||null===(p=h.combat)||void 0===p?void 0:p.abilitydoubleattackchance)&&void 0!==v?v:0,e.potency.total=null!==(m=null===(f=t.stats)||void 0===f||null===(g=f.combat)||void 0===g?void 0:g.basemodifier)&&void 0!==m?m:0,e.cb.total=null!==(b=null===(_=t.stats)||void 0===_||null===(C=_.combat)||void 0===C?void 0:C.critbonus)&&void 0!==b?b:0,e.fervor.total=null!==(y=null===(w=t.stats)||void 0===w||null===(k=w.combat)||void 0===k?void 0:k.fervor)&&void 0!==y?y:0,e.resolve.total=null!==(S=null===(A=t.stats)||void 0===A||null===(O=A.combat)||void 0===O?void 0:O.resolve)&&void 0!==S?S:0;const I=await te(null===(N=t.equipped_mount)||void 0===N?void 0:N.id);e.mount=I.displayname,e.mountId=null===(G=t.equipped_mount)||void 0===G?void 0:G.id,e.potency.mount=le(I,"Increases Potency"," by "),e.cbOvercap.mount=le(I,"Increases Crit Bonus Overcap"," by ");const P=await te(null===(x=t.equipped_familiar)||void 0===x?void 0:x.id);e.familiar=P.displayname,e.familiarId=null===(R=t.equipped_familiar)||void 0===R?void 0:R.id,e.potency.familiar=le(P,"Increases Potency"," by "),e.potency.familiar+=.09*e.potency.familiar,e.cbOvercap.familiar=le(P,"Increases Crit Bonus Overcap"," by "),e.cbOvercap.familiar+=.09*e.cbOvercap.familiar}function ke(e,t){for(const R of t){var a,r,o,s,i,n,l,c,d,u,v,h,p,m,f,g,b,_,C,y,w;const t=null!==(a=R.item)&&void 0!==a?a:{};if(e.resolve.gear+=null!==(r=null===(o=t.modifiers)||void 0===o||null===(s=o.resolve)||void 0===s?void 0:s.value)&&void 0!==r?r:0,e.potency.gear+=null!==(i=null===(n=t.modifiers)||void 0===n||null===(l=n.basemodifier)||void 0===l?void 0:l.value)&&void 0!==i?i:0,e.cb.gear+=null!==(c=null===(d=t.modifiers)||void 0===d||null===(u=d.critbonus)||void 0===u?void 0:u.value)&&void 0!==c?c:0,e.cbOvercap.gear+=null!==(v=null===(h=t.modifiers)||void 0===h||null===(p=h.critbonus_overcap)||void 0===p?void 0:p.value)&&void 0!==v?v:0,e.fervor.gear+=null!==(m=null===(f=t.modifiers)||void 0===f||null===(g=f.fervor)||void 0===g?void 0:g.value)&&void 0!==m?m:0,e.fervorOvercap.gear+=null!==(b=null===(_=t.modifiers)||void 0===_||null===(C=_.fervor_overcap)||void 0===C?void 0:C.value)&&void 0!==b?b:0,"food"===(null===(y=t.typeinfo)||void 0===y?void 0:y.name)?(e.potency.foodDrink+=ce(t,"Increases Potency"," by "),e.cb.foodDrink+=ce(t,"Increases Crit Bonus of"," by "),e.cbOvercap.foodDrink+=ce(t,"Increases Crit Bonus Overcap"," by "),e.fervor.foodDrink+=ce(t,"Increases Fervor of"," by "),e.fervorOvercap.foodDrink+=ce(t,"Increases Fervor Overcap"," by ")):(e.potency.gear+=ne(t,"Increases Potency"," by "),e.cb.gear+=ne(t,"Increases Crit Bonus of"," by "),e.cbOvercap.gear+=ne(t,"Increases Crit Bonus Overcap"," by "),e.fervor.gear+=ne(t,"Increases Fervor of"," by "),e.fervorOvercap.gear+=ne(t,"Increases Fervor Overcap"," by "),e.resolve.gear+=ne(t,"Increases Resolve"," by ")),Object.prototype.hasOwnProperty.call(e.gear,null!==(w=R.name)&&void 0!==w?w:"")){var k,S,A,O,N,G,x;const a=(null!==(k=null===(S=t.modifiers)||void 0===S||null===(A=S.critbonus_overcap)||void 0===A?void 0:A.value)&&void 0!==k?k:0)>500;e.gear[R.name]={...ye(),amount:null!==(O=null===(N=t.modifiers)||void 0===N||null===(G=N.resolve)||void 0===G?void 0:G.value)&&void 0!==O?O:0,tier:(null!==(x=t.tier)&&void 0!==x?x:"").toLowerCase(),id:t.id,iconId:t.iconid,name:t.displayname,cboc:a,isWeapon:"primary"==R.name||"secondary"==R.name||"ranged"==R.name}}"event_slot"==R.name&&(ne(t,"Increases Crit Bonus of"," by ")>0?e.checkup.plumage="CB":ne(t,"Increases Max Health of"," by ")>0?e.checkup.plumage="Health":ne(t,"Increases Ability Doublecast of"," by ")>0&&(e.checkup.plumage="ADC"))}}async function Se(e,t){var a={};for(const W of t)for(const t of null!==(r=null===(o=W.item)||void 0===o?void 0:o.adornment_list)&&void 0!==r?r:[]){var r,o;if("event_slot"!=W.name){var s;const r=null!==(s=t.color)&&void 0!==s?s:"unknown";if(Object.prototype.hasOwnProperty.call(e.gear,W.name)&&Object.prototype.hasOwnProperty.call(e.gear[W.name].adorns,r)&&e.gear[W.name].adorns[r].count++,t.id){let o=await te(t.id);if(o){var i,n,l,c,d;const s=ge(o);!s&&ve.includes(r)&&(e.checkup.oldAdorns++,e.checkup.messages.push("Outdated adorn: "+W.displayname));const L=null!==(i=null===(n=o.setbonus_info)||void 0===n?void 0:n.id)&&void 0!==i?i:0;var u;if(0!=L)if(Object.prototype.hasOwnProperty.call(a,L))a[L].numItems++;else a[L]={id:L,name:o.setbonus_info.desc,numItems:1,stats:null!==(u=o.setbonus_list)&&void 0!==u?u:[],isCurrent:s};const T=null!==(l=null===o||void 0===o?void 0:o.displayname)&&void 0!==l?l:"unknown",B=null!==(c=null===o||void 0===o||null===(d=o.setbonus_info)||void 0===d?void 0:d.displayname)&&void 0!==c?c:"";if(e.adorns[r]&&e.adorns[r].push({name:T,id:t.id,slot:W.displayname,set:B,current:s}),s){var v,h,p,m,f,g,b,_,C,y,w,k,S,A,O;if(t.spiritlevel&&o.growth_table)for(var N=1;N<=t.spiritlevel;N++){const t="level"+N;if(Object.prototype.hasOwnProperty.call(o.growth_table,t)){var G,x,R,I,P;const a=o.growth_table[t];e.potency.adorns+=null!==(G=null===a||void 0===a?void 0:a.basemodifier)&&void 0!==G?G:0,e.cb.adorns+=null!==(x=null===a||void 0===a?void 0:a.critbonus)&&void 0!==x?x:0,e.cbOvercap.adorns+=null!==(R=null===a||void 0===a?void 0:a.critbonus_overcap)&&void 0!==R?R:0,e.fervor.adorns+=null!==(I=null===a||void 0===a?void 0:a.fervor)&&void 0!==I?I:0,e.fervorOvercap.adorns+=null!==(P=null===a||void 0===a?void 0:a.fervor_overcap)&&void 0!==P?P:0}}else e.potency.adorns+=null!==(v=null===o||void 0===o||null===(h=o.modifiers)||void 0===h||null===(p=h.basemodifier)||void 0===p?void 0:p.value)&&void 0!==v?v:0,e.cb.adorns+=null!==(m=null===o||void 0===o||null===(f=o.modifiers)||void 0===f||null===(g=f.critbonus)||void 0===g?void 0:g.value)&&void 0!==m?m:0,e.cbOvercap.adorns+=null!==(b=null===o||void 0===o||null===(_=o.modifiers)||void 0===_||null===(C=_.critbonus_overcap)||void 0===C?void 0:C.value)&&void 0!==b?b:0,e.fervor.adorns+=null!==(y=null===o||void 0===o||null===(w=o.modifiers)||void 0===w||null===(k=w.fervor)||void 0===k?void 0:k.value)&&void 0!==y?y:0,e.fervorOvercap.adorns+=null!==(S=null===o||void 0===o||null===(A=o.modifiers)||void 0===A||null===(O=A.fervor_overcap)||void 0===O?void 0:O.value)&&void 0!==S?S:0;if(e.potency.adorns+=ne(o,"Increases Potency"," by "),e.cb.adorns+=ne(o,"Increases Crit Bonus of"," by "),e.cbOvercap.adorns+=ne(o,"Increases Crit Bonus Overcap"," by "),e.fervor.adorns+=ne(o,"Increases Fervor of"," by "),e.fervorOvercap.adorns+=ne(o,"Increases Fervor Overcap"," by "),"purple"===r){var $="";T.includes("Noxious Rending")&&($="Nox"),T.includes("Arcane Rending")&&($="Arcane"),T.includes("Elemental Rending")&&($="Elem"),T.includes("Anguish")&&($="Anguish"),T.includes("Rending Torrent")&&($="Torrent"),$&&(e.checkup.rendingAdorns&&(e.checkup.rendingAdorns+=", "),e.checkup.rendingAdorns+=$)}}}}else ve.includes(r)&&(e.checkup.emptyAdorns++,e.checkup.messages.push("Missing adorn: "+W.displayname))}}for(const W in e.adorns)e.adorns[W].sort((e,t)=>{const a=e.set.localeCompare(t.set);return 0==a?e.name.localeCompare(t.name):a});for(const W in a){const t=a[W];for(const a of t.stats){var L;const r=null!==(L=a.requireditems)&&void 0!==L?L:1;if(t.numItems>=r&&t.isCurrent){var T,B,F,E,D;e.potency.adorns+=null!==(T=a.basemodifier)&&void 0!==T?T:0,e.cb.adorns+=null!==(B=a.critbonus)&&void 0!==B?B:0,e.cbOvercap.adorns+=null!==(F=a.critbonus_overcap)&&void 0!==F?F:0,e.fervor.adorns+=null!==(E=a.fervor)&&void 0!==E?E:0,e.fervorOvercap.adorns+=null!==(D=a.fervor_overcap)&&void 0!==D?D:0;for(const t in a)t.startsWith("descriptiontag_")&&(e.potency.adorns+=ie(a[t],"Increases Potency"," by "),e.cb.adorns+=ie(a[t],"Increases Crit Bonus of"," by "),e.cbOvercap.adorns+=ie(a[t],"Increases Crit Bonus Overcap"," by "),e.fervor.adorns+=ie(a[t],"Increases Fervor of"," by "),e.fervorOvercap.adorns+=ie(a[t],"Increases Fervor Overcap"," by "))}}}}function Ae(e,t){for(const a of t)3127384430==a.id&&(e.potency.aas+=2311.47*a.tier),593578196==a.id&&(e.cb.aas+=29.55*a.tier,e.cbOvercap.aas+=44.32*a.tier),2646103995==a.id&&(e.potency.foodDrink*=1+.02*a.tier,e.cb.foodDrink*=1+.02*a.tier,e.fervorOvercap.foodDrink*=1+.02*a.tier),3472231681==a.id&&(e.potency.aas+=982.8*a.tier),1241444978==a.id&&(e.cb.aas+=29.3*a.tier,e.cbOvercap.aas+=65.97*a.tier),4109369949==a.id&&(e.cb.aas+=11*a.tier),907696401==a.id&&(e.cb.aas+=17.96*a.tier),1171275676==a.id&&(e.cb.aas+=9.16*a.tier),852954890==a.id&&(e.potency.aas+=5896.8*a.tier),4127882311==a.id&&(e.cb.aas+=21.99*a.tier)}function Oe(e,t,a){let r=!1,o=!1,s=!1;for(const c of t)switch(c.id){case 2041924408:r=!0;break;case 4215218770:o=!0;break;case 165116927:s=!0;break}var i=0,n=-.33,l=0;e.achievements=a;for(const c of e.achievements)0!=c.completed_timestamp&&(3777274946==c.id||2681141655==c.id||1052518175==c.id||2813687461==c.id?i+=.1:3501344307==c.id||1322701712==c.id||691032229==c.id?i+=.2:2181637900==c.id?e.potency.rorPuppy=6538:1010649208==c.id||4176831985==c.id||331538162==c.id||4227904972==c.id||517779125==c.id?n+=.33:(2798032151==c.id||538069026==c.id||570518067==c.id||-999==c.id||-999==c.id||-999==c.id||-999==c.id)&&(l+=.25));s&&(!o||n<1.32)?(e.potency.flawless+=13118.2,e.fervor.flawless+=215.8,e.fervorOvercap.flawless+=215.8,e.cbOvercap.flawless+=409.8,e.potency.flawless*=1+l,e.fervor.flawless*=1+l,e.fervorOvercap.flawless*=1+l,e.cbOvercap.flawless*=1+l):o?(e.potency.flawless+=9938,e.fervor.flawless+=160.4,e.fervorOvercap.flawless+=160.4,e.cbOvercap.flawless+=304.5,e.potency.flawless*=1+n,e.fervor.flawless*=1+n,e.fervorOvercap.flawless*=1+n,e.cbOvercap.flawless*=1+n):r&&(e.potency.flawless+=4953.1,e.fervor.flawless+=79.7,e.fervorOvercap.flawless+=79.7,e.potency.flawless*=1+i,e.fervor.flawless*=1+i,e.fervorOvercap.flawless*=1+i)}function Ne(e,t){let a=!1,r=!1,o=!1,s=!1,i=!1,n=!1;for(const l of t)switch(l.id){case 2255337601:i=!0;break;case 3791472682:s=!0;break;case 3983252899:s=!0;break;case 784766866:a=!0;break;case 2344685604:r=!0;break;case 1287339257:case 2002782521:o=!0;break;case 3056575190:n=!0;break}n?e.potency.preorderPet=32690:i?e.potency.preorderPet=24766:s&&(e.potency.preorderPet=6115),o?(e.potency.mountBuff=.25*e.potency.mount,e.cbOvercap.mount*=1.25):r?(e.potency.mountBuff=.2*e.potency.mount,e.cbOvercap.mount*=1.2):a&&(e.potency.mountBuff=.15*e.potency.mount,e.cbOvercap.mount*=1.15)}function Ge(e){e.resolve.other=e.resolve.total-e.resolve.gear,e.potency.other=Math.max(0,e.potency.total-(e.potency.mount+e.potency.mountBuff+e.potency.bardings+e.potency.familiar+e.potency.gear+e.potency.adorns+e.potency.foodDrink+e.potency.aas+e.potency.preorderPet+e.potency.flawless+e.potency.rorPuppy)),e.cb.other=Math.max(0,e.cb.total-(e.cb.gear+e.cb.adorns+e.cb.foodDrink+e.cb.aas+e.cb.guildBuff+e.cb.divineBuff)),e.fervor.other=Math.max(0,e.fervor.total-(e.fervor.gear+e.fervor.adorns+e.fervor.flawless+e.fervor.divineBuff)),e.cbOvercap.total=e.cbOvercap.base+e.cbOvercap.mount+e.cbOvercap.familiar+e.cbOvercap.gear+e.cbOvercap.adorns+e.cbOvercap.foodDrink+e.cbOvercap.aas+e.cbOvercap.flawless+e.cbOvercap.divineBuff,e.fervorOvercap.total=e.fervorOvercap.gear+e.fervorOvercap.adorns+e.fervorOvercap.foodDrink+e.fervorOvercap.flawless+e.fervorOvercap.divineBuff}function xe(e){const t=9e5,a=29e3,r=0,o=135e4,s=37e3,i=1500,n=13e5,l=1e3,c=1e3,d=7e3,u=Math.min(e.cbOvercap.total+c,e.cb.total+d);var v=Math.max(1,(e.potency.total+(o-n)-t)/(o-t)),h=Math.max(1,(u-a)/(s-a)),p=Math.max(1,(e.fervor.total+(i-l)-r)/(i-r));return 1e3*v*h*p}async function Re(e){var t=Ce();try{var a,r,o,s,i,n,l,c,d,u,v,h=e+"&c:resolve=equipmentslots,spells",p=await ee(h);if(null!==(a=p)&&void 0!==a&&a.error)throw p.error;var m=null===(r=p)||void 0===r||null===(o=r.character_list)||void 0===o?void 0:o[0];if(!m)throw"Character could not be fetched: "+e;await we(t,m),ke(t,m.equipmentslot_list),await Se(t,m.equipmentslot_list),Ae(t,null!==(s=null===(i=m.alternateadvancements)||void 0===i?void 0:i.alternateadvancement_list)&&void 0!==s?s:[]),Oe(t,null!==(n=m.spell_list)&&void 0!==n?n:[],null!==(l=null===(c=m.achievements)||void 0===c?void 0:c.achievement_list)&&void 0!==l?l:[]),Ne(t,null!==(d=m.spell_list)&&void 0!==d?d:[]),Ge(t),t.multiplier=xe(t),h=`/character_misc/?id=${t.id}&c:show=collection_list`,p=await ee(h);const _=null!==(u=null===(v=p)||void 0===v?void 0:v.character_misc_list)&&void 0!==u?u:[];if(_.length>0)for(const e of null!==(f=null===(g=_[0])||void 0===g?void 0:g.collection_list)&&void 0!==f?f:[]){var f,g,b={id:e.crc,collectedIds:[]};for(const t of e.item_list)b.collectedIds.push(t.crc);t.collections.push(b)}}catch(_){throw console.error(_),_}return Ie(t),t}function Ie(e){for(var t in e)"number"===typeof e[t]?e[t]=X(e[t]):"object"===typeof e[t]&&Ie(e[t])}const Pe=I["a"].create({baseURL:"https://eq2reappapi.mooo.com"});async function $e(e,t){try{await Pe.post(e,t)}catch(a){console.error(a)}}async function Le(e,t){e&&t&&await $e("/players",{server:e,name:t})}var Te={name:"CharSelector",props:{serverHint:String,charHint:String,autoload:Boolean},data:function(){return{server:"",charName:"",char:null,isFetching:!1}},computed:{getButtonText(){return this.isFetching?"Searching...":"Search"},getButtonDisabled(){return this.isFetching}},methods:{fetchStats:async function(){if(null!=this.server&&""!==this.server.trim()&&null!=this.charName&&""!==this.charName.trim()){this.$emit("apiSearch"),this.server=this.server.charAt(0).toUpperCase()+this.server.slice(1),this.charName=this.charName.charAt(0).toUpperCase()+this.charName.slice(1).toLowerCase(),this.isFetching=!0;try{if(this.char=await _e(this.server,this.charName),null==this.char)throw"Char stats not found";this.$emit("charFound",{char:this.char,charName:this.charName,server:this.server});try{Le(this.server,this.charName)}catch(e){console.err(e)}}catch(e){"service_unavailable"===e?this.$emit("apiError"):this.$emit("charFound",{char:null,charName:this.charName,server:this.server})}this.isFetching=!1}}},mounted:function(){this.serverHint&&(this.server=this.serverHint),this.charHint&&(this.charName=this.charHint),this.autoload&&""!=this.server&&""!=this.charName&&this.fetchStats()}},Be=Te,Fe=(a("881c"),Object(G["a"])(Be,z,K,!1,null,"1a7ea7da",null)),Ee=Fe.exports,De=function(){var e=this,t=e._self._c;return t("div",{staticClass:"char"},[t("div",{ref:"resolveModal",staticClass:"modal fade",attrs:{tabindex:"-1"}},[t("div",{staticClass:"modal-dialog"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v("Gear Details")]),t("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:function(t){return e.modal.hide()}}})]),t("div",{staticClass:"modal-body"},[t("table",{staticClass:"gear"},[t("GearItem",{attrs:{title:"Cloak",itemSlot:"cloak",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Head",itemSlot:"head",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Shoulders",itemSlot:"shoulders",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Chest",itemSlot:"chest",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Forearms",itemSlot:"forearms",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Hands",itemSlot:"hands",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Legs",itemSlot:"legs",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Feet",itemSlot:"feet",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Primary",itemSlot:"primary",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Secondary",itemSlot:"secondary",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Ranged",itemSlot:"ranged",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Charm",itemSlot:"activate1",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Charm",itemSlot:"activate2",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Left Ear",itemSlot:"ears",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Right Ear",itemSlot:"ears2",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Neck",itemSlot:"neck",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Left Finger",itemSlot:"left_ring",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Right Finger",itemSlot:"right_ring",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Left Wrist",itemSlot:"left_wrist",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Right Wrist",itemSlot:"right_wrist",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Waist",itemSlot:"waist",gear:e.char.gear}}),t("GearItem",{attrs:{title:"Event",itemSlot:"event_slot",gear:e.char.gear}})],1)]),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.modal.hide()}}},[e._v("Close")])])])])]),t("div",[t("h2",{staticClass:"card-title"},[e.getCharLink?t("a",{attrs:{href:e.getCharLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.name))]):e._e(),e._v(" "),t("span",{staticClass:"char-rank"},[e._v(e._s(e.char.multiplier))])]),t("div",{staticClass:"char-info"},[t("div",[e._v(e._s(e.char.class)+", "),e.getGuildLink?t("a",{attrs:{href:e.getGuildLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.guild))]):t("span",[e._v("Unguilded")])]),t("div",[t("font-awesome-icon",{attrs:{icon:["fas","dove"]}}),e.getMountLink?t("a",{attrs:{href:e.getMountLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.mount))]):t("span",[e._v("No mount")])],1),t("div",[t("font-awesome-icon",{attrs:{icon:["fas","frog"]}}),e.getFamiliarLink?t("a",{attrs:{href:e.getFamiliarLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.familiar))]):t("span",[e._v("No familiar")])],1),e.char.checkup.messages.length>0?t("div",e._l(e.char.checkup.messages,(function(a,r){return t("div",{key:r,staticClass:"checkup-message"},[t("font-awesome-icon",{attrs:{icon:["fas","exclamation-circle"]}}),e._v(e._s(a)+" ")],1)})),0):e._e()]),t("table",[e._m(0),t("tr",[t("td",[e._v("Cast Speed")]),t("td",[e._v(e._s(e.char.castSpeed.total))])]),t("tr",[t("td",[e._v("Reuse")]),t("td",[e._v(e._s(e.char.reuse.total))])]),t("tr",[t("td",[e._v("Double-cast")]),t("td",[e._v(e._s(e.char.adc.total))])]),t("tr",[t("th",[e._v("Resolve")]),t("th",[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.modal.show()}}},[e._v(e._s(e.char.resolve.total))])])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.char.resolve.gear))])]),t("tr",[t("td",[e._v("Other")]),t("td",[e._v(e._s(e.char.resolve.other))])]),t("tr",[t("th",[e._v("Potency")]),t("th",[e._v(e._s(e.formatNumber(e.char.potency.total)))])]),t("tr",[t("td",[e._v("Mount")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.mount)))])]),t("tr",[t("td",[e._v("Mount Buff")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.mountBuff)))])]),t("tr",[t("td",[e._v("Familiar")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.familiar)))])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.gear)))])]),t("tr",[t("td",[e._v("Adorns")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.adorns)))])]),t("tr",[t("td",[e._v("Food/Drink")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.foodDrink)))])]),t("tr",[t("td",[e._v("AAs")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.aas)))])]),t("tr",[t("td",[e._v("Preorder Pet")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.preorderPet)))])]),t("tr",[t("td",[e._v("Flawless")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.flawless)))])]),t("tr",[t("td",[e._v("RoR Puppy")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.rorPuppy)))])]),t("tr",[t("td",[e._v("Other")]),t("td",[e._v(e._s(e.formatNumber(e.char.potency.other)))])]),t("tr",[t("th",[e._v("Crit Bonus")]),t("th",[e._v(e._s(e.formatNumber(e.char.cb.total)))])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.gear)))])]),t("tr",[t("td",[e._v("Adorns")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.adorns)))])]),t("tr",[t("td",[e._v("Food/Drink")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.foodDrink)))])]),t("tr",[t("td",[e._v("AAs")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.aas)))])]),t("tr",[t("td",[e._v("Guild Buff")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.guildBuff)))])]),t("tr",[t("td",[e._v("Divine Buff")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.divineBuff)))])]),t("tr",[t("td",[e._v("Other")]),t("td",[e._v(e._s(e.formatNumber(e.char.cb.other)))])]),t("tr",[t("th",[e._v("Crit Bonus Overcap")]),t("th",[e._v(e._s(e.formatNumber(e.char.cbOvercap.total)))])]),t("tr",[t("td",[e._v("Base")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.base)))])]),t("tr",[t("td",[e._v("Familiar")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.familiar)))])]),t("tr",[t("td",[e._v("Mount")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.mount)))])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.gear)))])]),t("tr",[t("td",[e._v("Adorns")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.adorns)))])]),t("tr",[t("td",[e._v("Food/Drink")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.foodDrink)))])]),t("tr",[t("td",[e._v("AAs")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.aas)))])]),t("tr",[t("td",[e._v("Flawless")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.flawless)))])]),t("tr",[t("td",[e._v("Divine Buff")]),t("td",[e._v(e._s(e.formatNumber(e.char.cbOvercap.divineBuff)))])]),t("tr",[t("th",[e._v("Fervor")]),t("th",[e._v(e._s(e.char.fervor.total))])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.char.fervor.gear))])]),t("tr",[t("td",[e._v("Adorns")]),t("td",[e._v(e._s(e.char.fervor.adorns))])]),t("tr",[t("td",[e._v("Flawless")]),t("td",[e._v(e._s(e.char.fervor.flawless))])]),t("tr",[t("td",[e._v("Divine Buff")]),t("td",[e._v(e._s(e.char.fervor.divineBuff))])]),t("tr",[t("td",[e._v("Other")]),t("td",[e._v(e._s(e.char.fervor.other))])]),t("tr",[t("th",[e._v("Fervor Overcap")]),t("th",[e._v(e._s(e.char.fervorOvercap.total))])]),t("tr",[t("td",[e._v("Gear")]),t("td",[e._v(e._s(e.char.fervorOvercap.gear))])]),t("tr",[t("td",[e._v("Adorns")]),t("td",[e._v(e._s(e.char.fervorOvercap.adorns))])]),t("tr",[t("td",[e._v("Food/Drink")]),t("td",[e._v(e._s(e.char.fervorOvercap.foodDrink))])]),t("tr",[t("td",[e._v("Flawless")]),t("td",[e._v(e._s(e.char.fervorOvercap.flawless))])]),t("tr",[t("td",[e._v("Divine Buff")]),t("td",[e._v(e._s(e.char.fervorOvercap.divineBuff))])])]),e._l(["Blue","Red","Purple","Cyan","Green","White","Temporary"],(function(a){return t("div",{key:a},[e.filterAdorns(a).length>0?t("div",{staticClass:"adorn-list"},[t("h4",{staticClass:"adorn-type",class:a.toLowerCase()},[t("font-awesome-icon",{attrs:{icon:["far","sun"]}}),t("span",[e._v(" "+e._s(a)+" "),e.countAdornSlots(a)>0?t("span",{staticClass:"adorn-count"},[e._v("("+e._s(e.countEquippedAdorns(a))+" / "+e._s(e.countAdornSlots(a))+")")]):e._e()]),t("label",[t("input",{attrs:{type:"checkbox"},on:{click:function(t){e.showAdornSlots=!e.showAdornSlots}}}),t("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1)],1),t("ul",e._l(e.filterAdorns(a),(function(a,r){return t("li",{key:r},[a.current?e._e():t("font-awesome-icon",{staticClass:"adorn-old",attrs:{icon:["fas","exclamation-triangle"],title:"No effect in BoZ"}}),t("a",{attrs:{href:"https://u.eq2wire.com/item/index/"+a.id,target:"_blank"}},[e._v(e._s(a.name))]),a.set?t("span",{staticClass:"adorn-set"},[e._v(e._s(a.set))]):e._e(),t("span",{staticClass:"adorn-slot",class:{shown:e.showAdornSlots}},[e._v(e._s(a.slot))])],1)})),0)]):e._e()])}))],2)])},We=[function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("Misc")]),t("th")])}],Me=a("7b17"),je=function(){var e=this,t=e._self._c;return t("tr",{class:e.getHidden},[t("td",{staticClass:"gear-slot"},[t("img",{class:e.getImgClasses,attrs:{src:e.getIcon,onerror:"this.src='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='"}}),t("ul",{staticClass:"slots-purple"},e._l(e.getPurples,(function(a){return t("li",{key:a},[t("a",{attrs:{href:"#"}},[e._v(e._s(a))])])})),0),t("a",{attrs:{href:e.getId,target:"_blank"}},[t("span",[e._v(e._s(e.getName))])]),t("br")]),t("td",{class:e.getTier},[e._v(" "+e._s(e.getResolve)+" "),e.getUpgradeLink?t("a",{staticClass:"upgrade-link",attrs:{href:e.getUpgradeLink,target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:["fas","level-up-alt"]}})],1):e._e()])])},Je=[],qe={name:"GearItem",props:{title:String,itemSlot:String,gear:Object},data:function(){return{showing:!0}},computed:{getHidden(){return this.getResolveAmount()>0||"event_slot"===this.itemSlot&&Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)&&this.gear[this.itemSlot].id?"":"hidden"},getResolve(){return this.getResolveAmount()},getPurples(){return Array.from(Array(this.getPurpleCount()).keys())},getImgClasses(){var e=[this.getTier,"gear-icon"];return this.hasCboc&&e.push("cboc"),e.join(" ")},getTier(){return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)?this.gear[this.itemSlot].tier:""},getId(){return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)?"https://u.eq2wire.com/item/index/"+this.gear[this.itemSlot].id:"#"},getIcon(){return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)?`https://eq2reappapi.mooo.com/icons/${this.gear[this.itemSlot].iconId}.png`:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},getName(){return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)?this.gear[this.itemSlot].name:""},hasCboc(){return!!Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)&&(this.gear[this.itemSlot].cboc&&!this.gear[this.itemSlot].isWeapon)},getUpgradeLink(){if("event_slot"===this.itemSlot)return null;let e=this.itemSlot.charAt(0).toUpperCase()+this.itemSlot.slice(1);return e.startsWith("Activate")?e="Charm":e.startsWith("Ears")?e="Ear":e.endsWith("_ring")?e="Finger":e.endsWith("_wrist")&&(e="Wrist"),`https://u.eq2wire.com/soe/item_search_link/-1/-1/-1/-1/resolve/-1/-1/${e}/-1/-1/-1/-1/-1/-1/-1/-1/-1/-1/-1/-1/${this.getResolveAmount()+1}/-1/-1`}},methods:{getResolveAmount(){var e;return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)&&null!==(e=this.gear[this.itemSlot].amount)&&void 0!==e?e:0},getPurpleCount(){var e,t;return Object.prototype.hasOwnProperty.call(this.gear,this.itemSlot)&&null!==(e=null===(t=this.gear[this.itemSlot].adorns.purple)||void 0===t?void 0:t.count)&&void 0!==e?e:0}}},He=qe,Ue=(a("42df"),Object(G["a"])(He,je,Je,!1,null,"ba0809d2",null)),Qe=Ue.exports,Ze={name:"CharStats",components:{GearItem:Qe},props:{char:Object},data:function(){return{showAdornSlots:!1,modal:null}},computed:{getCharLink:function(){return null!=this.char?"https://u.eq2wire.com/soe/character_detail/"+this.char.id:""},getGuildLink:function(){var e,t;return null!==(e=null===(t=this.char)||void 0===t?void 0:t.guildId)&&void 0!==e&&e?"https://u.eq2wire.com/soe/guild_detail/"+this.char.guildId:""},getMountLink:function(){var e,t;return null!==(e=null===(t=this.char)||void 0===t?void 0:t.mountId)&&void 0!==e&&e?"https://u.eq2wire.com/item/index/"+this.char.mountId:""},getFamiliarLink:function(){var e,t;return null!==(e=null===(t=this.char)||void 0===t?void 0:t.familiarId)&&void 0!==e&&e?"https://u.eq2wire.com/item/index/"+this.char.familiarId:""},getButtonText(){return this.isFetching?"Searching...":"Search"},getButtonDisabled(){return this.isFetching}},methods:{filterAdorns:function(e){var t,a,r;const o=null!==(t=null===(a=this.char)||void 0===a||null===(r=a.adorns)||void 0===r?void 0:r[e.toLowerCase()])&&void 0!==t?t:[];return o},countEquippedAdorns:function(e){var t,a,r;const o=null!==(t=null===(a=this.char)||void 0===a||null===(r=a.adorns)||void 0===r?void 0:r[e.toLowerCase()])&&void 0!==t?t:[];return o.length},countAdornSlots:function(e){e=e.toLowerCase();let t=0;for(const i in null===(a=this.char)||void 0===a?void 0:a.gear){var a,r,o,s;if(Object.prototype.hasOwnProperty.call(null!==(r=null===(o=this.char.gear[i])||void 0===o?void 0:o.adorns)&&void 0!==r?r:{},e))t+=null!==(s=this.char.gear[i].adorns[e].count)&&void 0!==s?s:0}return t},formatNumber:function(e){return e>=1e4?e.toLocaleString():e}},mounted:function(){this.modal=new Me["a"](this.$refs.resolveModal)}},ze=Ze,Ke=(a("cc60"),Object(G["a"])(ze,De,We,!1,null,"9e905d2a",null)),Ve=Ke.exports,Ye={name:"Compare",components:{CharSelector:Ee,CharStats:Ve},data:function(){return{preloadChars:[],chars:[null,null],charsMessages:["",""],autoload:!1}},props:["version"],created:function(){var e;const t=new URLSearchParams(window.location.search);this.preloadChars=t.getAll("char"),this.autoload=(null!==(e=t.getAll("autoload"))&&void 0!==e?e:[]).length>0},computed:{},methods:{suggestCharPart:function(e,t){const a="name"==t?1:0;if(this.preloadChars.length>e){const t=this.preloadChars[e].split(".");if(t.length>a)return t[a]}else{var r;const a=null!==(r=document.cookie.split("; ").find(a=>a.startsWith(`eq2cmp${e+1}_${t}=`)))&&void 0!==r?r:"=",o=a.split("=")[1];if(void 0!=o&&null!=o&&""!=o&&("server"==t||this.preloadChars.length<1))return o}return""},apiError:function(){this.$emit("apiError")},apiSearch:function(){this.$emit("apiSearch")},charFound:function(e,t){this.$set(this.chars,e,t.char),t.char?(this.setCookie(e+1,"name",t.charName),this.setCookie(e+1,"server",t.server),this.$set(this.charsMessages,e,"")):this.$set(this.charsMessages,e,"Could not find "+t.charName),this.updateTitle(),this.updateLink()},setCookie:function(e,t,a){document.cookie=`eq2cmp${e}_${t}=${a};max-age=31536000;SameSite=Strict;path=${document.location.pathname}`},updateTitle:function(){for(var e=[],t=0;t<this.chars.length;t++)this.chars[t]&&e.push(this.chars[t].name);const a=e.join(", ");document.title=(a.length>0?a+" | ":"")+"eq2cmp"},updateLink:function(){for(var e=[],t=0;t<this.chars.length;t++)this.chars[t]&&e.push(`char=${this.chars[t].server}.${this.chars[t].name}`);const a=e.length<1?"":`${window.location.origin}${s["publicPath"]}?${e.join("&")}`;this.$emit("newLink",a)}}},Xe=Ye,et=Object(G["a"])(Xe,Q,Z,!1,null,"03bd2a6e",null),tt=et.exports,at=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[e.message?t("div",{staticClass:"alert alert-success alert-dismissible fade show"},[e._v(" "+e._s(e.message)+" "),t("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.message=""}}})]):e._e()])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("h2",[e._v("Load")]),t("div",{staticClass:"input-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedGroupName,expression:"selectedGroupName"}],staticClass:"form-select",attrs:{id:"load"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedGroupName=t.target.multiple?a:a[0]}}},e._l(e.getSortedSavedGroups,(function(a){return t("option",{key:a.name,domProps:{value:a.name}},[e._v(e._s(a.name))])})),0),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.loadSavedGroup}},[e._v("Load")]),t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.removeSavedGroup}},[e._v("Remove")])])]),t("div",{staticClass:"col-md-6"},[t("h2",[e._v("Save")]),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newGroupName,expression:"newGroupName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"New group name"},domProps:{value:e.newGroupName},on:{input:function(t){t.target.composing||(e.newGroupName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveNewGroup}},[e._v("Save")])])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9 col-lg-6"},[t("h2",[e._v("Find Characters")]),t("CharSelector",{on:{apiError:e.apiError,apiSearch:e.apiSearch,charFound:e.charFound}}),e.searchMessage?t("div",{staticClass:"alert alert-warning"},[e._v(" "+e._s(e.searchMessage)+" ")]):e._e()],1)]),e.searchChar?t("div",{staticClass:"row found-char"},[t("div",{staticClass:"col"},[t("CharStatsPreview",{attrs:{char:e.searchChar,showAdd:!0},on:{addGroup:e.addToGroup}})],1)]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9 col-lg-6"},[t("h2",[e._v("Sort by")]),t("div",{staticClass:"option-section"},[t("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.sort,expression:"sort",modifiers:{trim:!0}}],staticClass:"form-select",attrs:{id:"sort"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sort=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"name"}},[e._v("Name")]),t("option",{attrs:{value:"resolve"}},[e._v("Resolve")]),t("option",{attrs:{value:"potency"}},[e._v("Potency")]),t("option",{attrs:{value:"cb"}},[e._v("Crit Bonus")]),t("option",{attrs:{value:"fervor"}},[e._v("Fervor")])])])])]),t("div",{staticClass:"accordion",attrs:{id:"optionsAccordion"}},[t("div",{staticClass:"accordion-item"},[e._m(0),t("div",{staticClass:"accordion-collapse collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-bs-parent":"#optionsAccordion"}},[t("div",{staticClass:"accordion-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"option-section"},[t("div",{staticClass:"h5"},[e._v("Show resolve for")]),t("div",{staticClass:"resolve-checks"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showResolveWeapons,expression:"showResolveWeapons"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showResolveWeapons"},domProps:{checked:Array.isArray(e.showResolveWeapons)?e._i(e.showResolveWeapons,null)>-1:e.showResolveWeapons},on:{change:function(t){var a=e.showResolveWeapons,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.showResolveWeapons=a.concat([s])):i>-1&&(e.showResolveWeapons=a.slice(0,i).concat(a.slice(i+1)))}else e.showResolveWeapons=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"showResolveWeapons"}},[e._v("Weapons")])]),t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showResolveGear,expression:"showResolveGear"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showResolveGear"},domProps:{checked:Array.isArray(e.showResolveGear)?e._i(e.showResolveGear,null)>-1:e.showResolveGear},on:{change:function(t){var a=e.showResolveGear,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.showResolveGear=a.concat([s])):i>-1&&(e.showResolveGear=a.slice(0,i).concat(a.slice(i+1)))}else e.showResolveGear=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"showResolveGear"}},[e._v("Gear")])]),t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showResolveJewelry,expression:"showResolveJewelry"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showResolveJewelry"},domProps:{checked:Array.isArray(e.showResolveJewelry)?e._i(e.showResolveJewelry,null)>-1:e.showResolveJewelry},on:{change:function(t){var a=e.showResolveJewelry,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.showResolveJewelry=a.concat([s])):i>-1&&(e.showResolveJewelry=a.slice(0,i).concat(a.slice(i+1)))}else e.showResolveJewelry=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"showResolveJewelry"}},[e._v("Jewelry")])]),t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showResolveExtra,expression:"showResolveExtra"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showResolveExtra"},domProps:{checked:Array.isArray(e.showResolveExtra)?e._i(e.showResolveExtra,null)>-1:e.showResolveExtra},on:{change:function(t){var a=e.showResolveExtra,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.showResolveExtra=a.concat([s])):i>-1&&(e.showResolveExtra=a.slice(0,i).concat(a.slice(i+1)))}else e.showResolveExtra=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"showResolveExtra"}},[e._v("Extra")])])])]),t("div",{staticClass:"option-section"},[t("div",{staticClass:"form-group form-inline"},[t("label",{attrs:{for:"filterItemsByResolve"}},[e._v("Only show items with resolve <=")]),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.resolveCutoff,expression:"resolveCutoff",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",id:"filterItemsByResolve"},domProps:{value:e.resolveCutoff},on:{keypress:function(t){return e.validateResolveCutoff(t)},input:function(t){t.target.composing||(e.resolveCutoff=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),t("div",{staticClass:"option-section"},[t("div",{staticClass:"h5"},[e._v("Compare")]),t("div",{staticClass:"compare-actions"},[t("div",{staticClass:"form-check"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showCompare,expression:"showCompare"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"showCompare"},domProps:{checked:Array.isArray(e.showCompare)?e._i(e.showCompare,null)>-1:e.showCompare},on:{change:function(t){var a=e.showCompare,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.showCompare=a.concat([s])):i>-1&&(e.showCompare=a.slice(0,i).concat(a.slice(i+1)))}else e.showCompare=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"showCompare"}},[e._v("Select characters")])]),e.comparePossible?t("button",{ref:"btnCompare",staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.doCompare}},[e._v(" Compare ")]):e._e()])])])])])])])]),e._l(e.getSortedChars,(function(a){return t("div",{key:a.id,staticClass:"row"},[t("div",{staticClass:"col"},[t("CharStatsPreview",{attrs:{char:a,showRemove:!0,showCompare:e.showCompare,disableCompare:e.disableCompare,showResolveWeapons:e.showResolveWeapons,showResolveGear:e.showResolveGear,showResolveJewelry:e.showResolveJewelry,showResolveExtra:e.showResolveExtra,resolveCutoff:e.resolveCutoff},on:{removeGroup:e.removeFromGroup,addCompare:e.addToCompare,removeCompare:e.removeFromCompare}})],1)])}))],2)},rt=[function(){var e=this,t=e._self._c;return t("h3",{staticClass:"accordion-header",attrs:{id:"headingOne"}},[t("button",{staticClass:"accordion-button collapsed",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"}},[e._v(" Options ")])])}],ot=(a("b7ef"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"char-stats-preview"},[e.showCompare?t("div",{staticClass:"form-check compare"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.comparing,expression:"comparing"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"compare"+e._uid,disabled:e.compareEnabled},domProps:{checked:Array.isArray(e.comparing)?e._i(e.comparing,null)>-1:e.comparing},on:{click:e.handleClick,change:function(t){var a=e.comparing,r=t.target,o=!!r.checked;if(Array.isArray(a)){var s=null,i=e._i(a,s);r.checked?i<0&&(e.comparing=a.concat([s])):i>-1&&(e.comparing=a.slice(0,i).concat(a.slice(i+1)))}else e.comparing=o}}}),t("label",{staticClass:"form-check-label",attrs:{for:"compare"+e._uid}},[e._v("Compare")])]):e._e(),t("div",{staticClass:"header"},[t("div",{staticClass:"info"},[t("div",{staticClass:"name"},[t("a",{attrs:{href:e.getCharLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.name))])]),t("div",[e._v(e._s(e.char.class)+",  "),t("a",{attrs:{href:e.getGuildLink,target:"_blank",rel:"nofollow"}},[e._v(e._s(e.char.guild))])])]),t("div",{staticClass:"actions"},[e.showAdd?t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$emit("addGroup",e.char)}}},[e._v("Add")]):e._e(),e.showRemove?t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$emit("removeGroup",e.char)}}},[e._v("Remove")]):e._e()])]),t("div",{staticClass:"stats"},[t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.resolve.total))]),t("span",{staticClass:"badge-label"},[e._v("Resolve")])]),t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.potency.total.toLocaleString()))]),t("span",{staticClass:"badge-label"},[e._v("Potency")])]),t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.cb.total.toLocaleString()))]),t("span",{staticClass:"badge-label"},[e._v("CB")])]),t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.fervor.total))]),t("span",{staticClass:"badge-label"},[e._v("Fervor")])])]),e.showResolveWeapons?t("div",{staticClass:"resolve"},[e.filterResolveCutoff(e.char.gear.primary.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.gear.primary.amount))]),t("span",{staticClass:"badge-label"},[e._v("Main")])]):e._e(),e.filterResolveCutoff(e.char.gear.secondary.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.gear.secondary.amount))]),t("span",{staticClass:"badge-label"},[e._v("Second")])]):e._e(),e.filterResolveCutoff(e.char.gear.ranged.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark"},[e._v(e._s(e.char.gear.ranged.amount))]),t("span",{staticClass:"badge-label"},[e._v("Ranged")])]):e._e()]):e._e(),e.showResolveGear?t("div",{staticClass:"resolve"},[e.filterResolveCutoff(e.char.gear.head.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.head.cboc&&!e.char.gear.head.isWeapon}},[e._v(e._s(e.char.gear.head.amount))]),t("span",{staticClass:"badge-label"},[e._v("Head")])]):e._e(),e.filterResolveCutoff(e.char.gear.chest.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.chest.cboc&&!e.char.gear.chest.isWeapon}},[e._v(e._s(e.char.gear.chest.amount))]),t("span",{staticClass:"badge-label"},[e._v("Chest")])]):e._e(),e.filterResolveCutoff(e.char.gear.shoulders.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.shoulders.cboc&&!e.char.gear.shoulders.isWeapon}},[e._v(e._s(e.char.gear.shoulders.amount))]),t("span",{staticClass:"badge-label"},[e._v("Shoulders")])]):e._e(),e.filterResolveCutoff(e.char.gear.forearms.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.forearms.cboc&&!e.char.gear.forearms.isWeapon}},[e._v(e._s(e.char.gear.forearms.amount))]),t("span",{staticClass:"badge-label"},[e._v("Forearms")])]):e._e(),e.filterResolveCutoff(e.char.gear.hands.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.hands.cboc&&!e.char.gear.hands.isWeapon}},[e._v(e._s(e.char.gear.hands.amount))]),t("span",{staticClass:"badge-label"},[e._v("Hands")])]):e._e(),e.filterResolveCutoff(e.char.gear.legs.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.legs.cboc&&!e.char.gear.legs.isWeapon}},[e._v(e._s(e.char.gear.legs.amount))]),t("span",{staticClass:"badge-label"},[e._v("Legs")])]):e._e(),e.filterResolveCutoff(e.char.gear.feet.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.feet.cboc&&!e.char.gear.feet.isWeapon}},[e._v(e._s(e.char.gear.feet.amount))]),t("span",{staticClass:"badge-label"},[e._v("Feet")])]):e._e()]):e._e(),e.showResolveJewelry?t("div",{staticClass:"resolve"},[e.filterResolveCutoff(e.char.gear.ears.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.ears.cboc&&!e.char.gear.ears.isWeapon}},[e._v(e._s(e.char.gear.ears.amount))]),t("span",{staticClass:"badge-label"},[e._v("L Ear")])]):e._e(),e.filterResolveCutoff(e.char.gear.ears2.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.ears2.cboc&&!e.char.gear.ears2.isWeapon}},[e._v(e._s(e.char.gear.ears2.amount))]),t("span",{staticClass:"badge-label"},[e._v("R Ear")])]):e._e(),e.filterResolveCutoff(e.char.gear.left_wrist.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.left_wrist.cboc&&!e.char.gear.left_wrist.isWeapon}},[e._v(e._s(e.char.gear.left_wrist.amount))]),t("span",{staticClass:"badge-label"},[e._v("L Wrist")])]):e._e(),e.filterResolveCutoff(e.char.gear.right_wrist.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.right_wrist.cboc&&!e.char.gear.right_wrist.isWeapon}},[e._v(e._s(e.char.gear.right_wrist.amount))]),t("span",{staticClass:"badge-label"},[e._v("R Wrist")])]):e._e(),e.filterResolveCutoff(e.char.gear.left_ring.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.left_ring.cboc&&!e.char.gear.left_ring.isWeapon}},[e._v(e._s(e.char.gear.left_ring.amount))]),t("span",{staticClass:"badge-label"},[e._v("L Ring")])]):e._e(),e.filterResolveCutoff(e.char.gear.right_ring.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.right_ring.cboc&&!e.char.gear.right_ring.isWeapon}},[e._v(e._s(e.char.gear.right_ring.amount))]),t("span",{staticClass:"badge-label"},[e._v("R Ring")])]):e._e()]):e._e(),e.showResolveExtra?t("div",{staticClass:"resolve"},[e.filterResolveCutoff(e.char.gear.cloak.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.cloak.cboc&&!e.char.gear.cloak.isWeapon}},[e._v(e._s(e.char.gear.cloak.amount))]),t("span",{staticClass:"badge-label"},[e._v("Cloak")])]):e._e(),e.filterResolveCutoff(e.char.gear.neck.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.neck.cboc&&!e.char.gear.neck.isWeapon}},[e._v(e._s(e.char.gear.neck.amount))]),t("span",{staticClass:"badge-label"},[e._v("Neck")])]):e._e(),e.filterResolveCutoff(e.char.gear.waist.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.waist.cboc&&!e.char.gear.waist.isWeapon}},[e._v(e._s(e.char.gear.waist.amount))]),t("span",{staticClass:"badge-label"},[e._v("Waist")])]):e._e(),e.filterResolveCutoff(e.char.gear.activate1.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.activate1.cboc&&!e.char.gear.activate1.isWeapon}},[e._v(e._s(e.char.gear.activate1.amount))]),t("span",{staticClass:"badge-label"},[e._v("L Charm")])]):e._e(),e.filterResolveCutoff(e.char.gear.activate2.amount)?t("div",[t("span",{staticClass:"badge bg-warning text-dark",class:{cboc:e.char.gear.activate2.cboc&&!e.char.gear.activate2.isWeapon}},[e._v(e._s(e.char.gear.activate2.amount))]),t("span",{staticClass:"badge-label"},[e._v("R Charm")])]):e._e()]):e._e()])}),st=[],it={name:"CharStatsPreview",props:{char:Object,showAdd:Boolean,showRemove:Boolean,showCompare:Boolean,disableCompare:Boolean,showResolveWeapons:Boolean,showResolveGear:Boolean,showResolveJewelry:Boolean,showResolveExtra:Boolean,resolveCutoff:Number},data:function(){return{comparing:!1}},computed:{compareEnabled:function(){return!this.comparing&&this.disableCompare},getCharLink:function(){return null!=this.char?`${window.location.origin}${s["publicPath"]}?char=${this.char.server}.${this.char.name}&autoload`:""},getGuildLink:function(){var e,t;return null!==(e=null===(t=this.char)||void 0===t?void 0:t.guildId)&&void 0!==e&&e?"https://u.eq2wire.com/soe/guild_detail/"+this.char.guildId:""}},methods:{handleClick(){this.comparing?this.$emit("removeCompare",this.char):this.$emit("addCompare",this.char)},filterResolveCutoff(e){return!!isNaN(this.resolveCutoff)||e>0&&e<=this.resolveCutoff}}},nt=it,lt=(a("8fc9"),Object(G["a"])(nt,ot,st,!1,null,"e4313d2a",null)),ct=lt.exports,dt={name:"Group",components:{CharSelector:Ee,CharStatsPreview:ct},data:function(){return{searchChar:null,searchMessage:"",chars:[],message:"",sort:"name",showResolveWeapons:!1,showResolveGear:!1,showResolveJewelry:!1,showResolveExtra:!1,resolveCutoff:1e4,showCompare:!1,disableCompare:!1,compareChars:[],savedGroups:[],selectedGroupName:"",newGroupName:""}},mounted:async function(){this.parseOpts(),this.loadSavedGroups(),this.newGroupName&&(this.selectedGroupName=this.newGroupName,this.loadSavedGroup())},watch:{$route:async function(){this.loadSavedGroups()}},computed:{getSortedChars:function(){let e=[...this.chars];switch(this.sort){case"name":e.sort((e,t)=>e.name.localeCompare(t.name));break;case"resolve":e.sort((e,t)=>t.resolve.total>e.resolve.total?1:-1);break;case"potency":e.sort((e,t)=>t.potency.total>e.potency.total?1:-1);break;case"cb":e.sort((e,t)=>t.cb.total>e.cb.total?1:-1);break;case"fervor":e.sort((e,t)=>t.fervor.total>e.fervor.total?1:-1);break}return e},comparePossible(){return this.showCompare&&this.compareChars.length>=2},getSortedSavedGroups(){const e=[...this.savedGroups];return e.sort((e,t)=>e.name.localeCompare(t.name)),e}},methods:{parseOpts:function(){const e=this.$route.query;if(e&&e.opts){const a=JSON.parse(atob(e.opts));var t;if(a.groupName)w(a.groupName,null!==(t=a.chars)&&void 0!==t?t:[]),this.newGroupName=a.groupName}},loadPlayers:async function(e){if(e.length>0){this.apiSearch(),this.message=`Loading ${e.length} character${1==e.length?"":"s"}...`;var t=[];for(const s of e)t.push(be(s));let a=[],r=[],o=await Promise.allSettled(t);o.forEach(e=>{"fulfilled"===e.status?a.push(e.value):("service_unavailable"===e.reason&&this.apiError(),r.push(e.value))}),this.chars=a,r.length>0?(this.message=`Failed to load ${r.length} of ${e.length} characters`,r.forEach(e=>{console.error("Failed to load char",e)})):this.message="",this.updateTitle(),this.updateLink()}else this.message=""},charFound:function(e){this.searchMessage="",e.char?this.searchChar=e.char:this.searchMessage="Could not find "+e.charName},apiError:function(){this.$emit("apiError")},apiSearch:function(){this.$emit("apiSearch")},addToGroup(e){if(null!=e){for(const t of this.chars)if(t.id==e.id)return;this.chars.push(e),this.message="",this.searchChar=null,this.saveCurrentGroup(),this.updateTitle(),this.updateLink()}},removeFromGroup(e){if(null!=e){for(var t=-1,a=0;a<this.chars.length;a++)if(this.chars[a].id==e.id){t=a;break}t>=0&&(this.chars.splice(t,1),this.message="",this.saveCurrentGroup(),this.updateTitle(),this.updateLink())}},addToCompare(e){this.compareChars.push(e),this.disableCompare=this.comparePossible,this.comparePossible&&window.requestAnimationFrame(()=>{let e=this.$refs.btnCompare;e.focus(),window.scrollTo({top:e.offsetTop-30,behavior:"smooth"})})},removeFromCompare(e){for(var t=-1,a=0;a<this.compareChars.length;a++)if(this.compareChars[a].id==e.id){t=a;break}t>=0&&this.compareChars.splice(t,1),this.disableCompare=this.comparePossible},getGroupCharIds(){return this.chars.map(e=>e.id)},validateResolveCutoff(e){const t=["0","1","2","3","4","5","6","7","8","9","."],a=e.key;t.includes(a)||e.preventDefault()},updateTitle:function(e){if(!e){const t=this.chars.length>0?`(${this.chars.length}) `:"";e="Group "+t}document.title=e+" | eq2cmp"},updateLink:function(){var e;const t={chars:this.chars.map(e=>e.id),groupName:null!==(e=this.selectedGroupName)&&void 0!==e?e:""},a=btoa(JSON.stringify(t));this.$emit("newLink",`${window.location.origin}${s["publicPath"]}group?opts=${a}`)},doCompare(){for(var e=[],t=0;t<this.compareChars.length;t++)this.compareChars[t]&&e.push(`char=${this.compareChars[t].server}.${this.compareChars[t].name}`);const a=e.length<1?"":`${window.location.origin}${s["publicPath"]}?${e.join("&")}&autoload`;window.open(a,"_blank").focus()},saveCurrentGroup(){this.selectedGroupName&&(w(this.selectedGroupName,this.getGroupCharIds()),this.loadSavedGroups())},saveNewGroup(){this.newGroupName&&(w(this.newGroupName,this.getGroupCharIds()),this.loadSavedGroups(),this.selectedGroupName=this.newGroupName)},loadSavedGroup(){if(this.selectedGroupName){const e=_(this.selectedGroupName);if(e){const t=e.ids||[];this.loadPlayers(t),this.saveGroupName=e.name,this.newGroupName=e.name,this.updateTitle(),this.updateLink()}}},removeSavedGroup(){this.selectedGroupName&&(y(this.selectedGroupName),this.loadSavedGroups(),this.updateTitle(),this.updateLink())},loadSavedGroups(){this.savedGroups.splice(0,this.savedGroups.length),this.savedGroups.push(...b())}}},ut=dt,vt=(a("2e46"),Object(G["a"])(ut,at,rt,!1,null,"097e9ad8",null)),ht=vt.exports,pt=function(){var e,t=this,a=t._self._c;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t.message?a("div",{staticClass:"alert alert-success alert-dismissible fade show"},[t._v(" "+t._s(t.message)+" "),a("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.message=""}}})]):t._e()])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9 col-lg-6"},[a("h2",[t._v("Load group")]),a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedGroupName,expression:"selectedGroupName"}],staticClass:"form-select",attrs:{id:"load"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.selectedGroupName=e.target.multiple?a:a[0]}}},t._l(t.getSortedSavedGroups,(function(e){return a("option",{key:e.name,domProps:{value:e.name}},[t._v(t._s(e.name))])})),0),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.getLoadGroupButtonDisabled},on:{click:t.loadSelectedGroup}},[t._v("Load")])])])]),a("div",{staticClass:"achievement-section"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9"},[a("h2",[t._v("Achievements")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchAchievementText,expression:"searchAchievementText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Achievement name or ID"},domProps:{value:t.searchAchievementText},on:{input:function(e){e.target.composing||(t.searchAchievementText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.getSearchAchievementsButtonDisabled},on:{click:t.searchAchievements}},[t._v("Search")])]),t.foundAchievements.length>0?a("div",{attrs:{id:"foundAchievements"}},[a("table",t._l(t.foundAchievements,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name)+"  ["+t._s(e.id)+"]")]),a("td",[a("button",{staticClass:"btn btn-primary btn-sm btn-simple",attrs:{type:"button",disabled:t.achievementIsSelected(e)},on:{click:function(a){return t.addAchievement(e)}}},[t._v("+")]),a("button",{staticClass:"btn btn-primary btn-sm btn-simple",attrs:{type:"button",disabled:!t.achievementIsSelected(e)},on:{click:function(a){return t.removeAchievement(e)}}},[t._v("-")])])])})),0),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.foundAchievements=[]}}},[t._v("Done")])]):t._e()])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Sort by")]),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.sortAchievements,expression:"sortAchievements",modifiers:{trim:!0}}],staticClass:"form-select",attrs:{id:"sortAchievements"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.sortAchievements=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"completion"}},[t._v("Completion")]),a("option",{attrs:{value:"name"}},[t._v("Name")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Filter by player or missing achievement step")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.filterAchievementText,expression:"filterAchievementText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.filterAchievementText},on:{input:function(e){e.target.composing||(t.filterAchievementText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"achievements"},t._l(t.getCharAchievements,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"achievement-description"},[a("div",{staticClass:"achievement-description-text",domProps:{innerHTML:t._s(e.description)}}),a("div",{staticClass:"achievement-description-controls"},[a("button",{staticClass:"btn btn-secondary btn-sm btn-simple",attrs:{type:"button"},on:{click:a=>t.copyAchievementLink(e,a)}},[t._v("Copy link")]),a("button",{staticClass:"btn btn-secondary btn-sm btn-simple",attrs:{type:"button"},on:{click:function(a){return t.removeAchievement(e)}}},[t._v("Remove")])])]),e.chars.length>0?a("div",t._l(e.chars,(function(r){return a("div",{key:r.name,staticClass:"char-achievement"},[t._v(" "+t._s(r.name)+" "),r.completed?a("font-awesome-icon",{staticClass:"char-achievement-success",attrs:{icon:["fas","check"]}}):t._e(),r.completed||1!=r.stepCount?t._e():a("font-awesome-icon",{staticClass:"char-achievement-fail",attrs:{icon:["fas","times"]}}),!r.completed&&r.stepCount>1?a("div",{staticClass:"char-achievement-count achievement-tooltip"},[t._v(" "+t._s(r.completedCount)+"/"+t._s(e.stepCount)+" "),a("span",{staticClass:"achievement-tooltip-text",domProps:{innerHTML:t._s(r.tooltip)}})]):t._e()],1)})),0):a("div",[t.isLoadingGroup?a("div",[t._v("Loading...")]):a("div",[t._v("No group selected, or no filter matches.")])])])])])})),0)]),a("div",{staticClass:"collection-section"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9"},[a("h2",[t._v("Collections")]),a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchCollectionText,expression:"searchCollectionText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Collection name or ID"},domProps:{value:t.searchCollectionText},on:{input:function(e){e.target.composing||(t.searchCollectionText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.getSearchCollectionsButtonDisabled},on:{click:t.searchCollections}},[t._v("Search")])]),t.foundCollections.length>0?a("div",{attrs:{id:"foundCollections"}},[a("table",t._l(t.foundCollections,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.name)+"  ["+t._s(e.id)+"]")]),a("td",[a("button",{staticClass:"btn btn-primary btn-sm btn-simple",attrs:{type:"button",disabled:t.collectionIsSelected(e)},on:{click:function(a){return t.addCollection(e)}}},[t._v("+")]),a("button",{staticClass:"btn btn-primary btn-sm btn-simple",attrs:{type:"button",disabled:!t.collectionIsSelected(e)},on:{click:function(a){return t.removeCollection(e)}}},[t._v("-")])])])})),0),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.foundCollections=[]}}},[t._v("Done")])]):t._e()])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Sort by")]),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.sortCollections,expression:"sortCollections",modifiers:{trim:!0}}],staticClass:"form-select",attrs:{id:"sortCollections"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.sortCollections=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"completion"}},[t._v("Completion")]),a("option",{attrs:{value:"name"}},[t._v("Name")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Filter by player or missing collection item")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.filterCollectionText,expression:"filterCollectionText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.filterCollectionText},on:{input:function(e){e.target.composing||(t.filterCollectionText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"collections"},t._l(t.getCharCollections,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h3",[t._v(" "+t._s(e.name)+" "),a("button",{staticClass:"btn btn-secondary btn-sm btn-simple",attrs:{type:"button"},on:{click:function(a){return t.removeCollection(e)}}},[t._v("Remove")])]),e.chars.length>0?a("div",t._l(e.chars,(function(r){return a("div",{key:r.name,staticClass:"char-collection"},[t._v(" "+t._s(r.name)+" "),r.completed?a("font-awesome-icon",{staticClass:"char-collection-success",attrs:{icon:["fas","check"]}}):t._e(),r.completed||1!=r.itemCount?t._e():a("font-awesome-icon",{staticClass:"char-collection-fail",attrs:{icon:["fas","times"]}}),!r.completed&&r.itemCount>1?a("div",{staticClass:"char-collection-count collection-tooltip"},[t._v(" "+t._s(r.completedCount)+"/"+t._s(e.itemCount)+" "),a("span",{staticClass:"collection-tooltip-text",domProps:{innerHTML:t._s(r.tooltip)}})]):t._e()],1)})),0):a("div",[t.isLoadingGroup?a("div",[t._v("Loading...")]):a("div",[t._v("No group selected, or no filter matches.")])])])])])})),0)]),a("div",{staticClass:"gear-section"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h3",[t._v("Sort by")]),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.sortGear,expression:"sortGear",modifiers:{trim:!0}}],staticClass:"form-select",attrs:{id:"sortGear"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));t.sortGear=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"name"}},[t._v("Name")]),a("option",{attrs:{value:"resolve"}},[t._v("Resolve")]),a("option",{attrs:{value:"cboc"}},[t._v("CBOC")]),a("option",{attrs:{value:"purpleAdorns"}},[t._v("Purple Slots")]),a("option",{attrs:{value:"badAdorns"}},[t._v("Adorn Issues")]),a("option",{attrs:{value:"rending"}},[t._v("Rending")]),a("option",{attrs:{value:"plumage"}},[t._v("Plume")])])])])]),a("div",{staticClass:"gears"},[a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[(null===(e=t.getCharGear.chars)||void 0===e?void 0:e.length)>0?a("div",[a("table",[t._m(1),t._l(t.getCharGear.chars,(function(e){return a("tr",{key:e.name},[a("td",[a("a",{attrs:{href:t.getCharLink(e),target:"_blank"}},[t._v(t._s(e.name))])]),a("td",[t._v(t._s(e.resolve))]),a("td",[t._v(t._s(e.cbocCount))]),a("td",[t._v(t._s(e.purpleAdornCount))]),a("td",[t._v(t._s(e.emptyAdornCount+e.oldAdornCount))]),a("td",[t._v(t._s(e.rendingAdorns))]),a("td",[t._v(t._s(e.plumage))])])}))],2)]):a("div",[t.isLoadingGroup?a("div",[t._v("Loading...")]):a("div",[t._v("No group selected.")])])])])])])])])},mt=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-9"},[t("h2",[e._v("Gear")])])},function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("Name")]),t("th",[e._v("Resolve")]),t("th",[e._v("CBOC")]),t("th",[e._v("Purple Slots")]),t("th",[e._v("Adorn Issues")]),t("th",[e._v("Rending")]),t("th",[e._v("Plume")])])}],ft={name:"Report",components:{},data:function(){return{optsAchievementIds:[],optsCollectionIds:[],optsGroupName:"",chars:[],achievements:[],collections:[],message:"",savedGroups:[],selectedGroupName:"",searchAchievementText:"",searchCollectionText:"",isLoadingGroup:!1,isSearchingAchievements:!1,isSearchingCollections:!1,foundAchievements:[],foundCollections:[],sortAchievements:"completion",sortCollections:"completion",sortGear:"name",filterAchievementText:"",filterCollectionText:""}},mounted:async function(){this.parseOpts(),this.loadSavedGroups(),this.optsAchievementIds.length>0&&await this.loadAchievements(this.optsAchievementIds),this.achievements.length<1&&this.loadAchievementsFromStorage(),this.optsCollectionIds.length>0&&await this.loadCollections(this.optsCollectionIds),this.collections.length<1&&this.loadCollectionsFromStorage(),this.optsGroupName&&(this.selectedGroupName=this.optsGroupName,await this.loadSelectedGroup())},watch:{$route:async function(){this.loadAchievementsFromStorage(),this.loadCollectionsFromStorage(),this.loadSavedGroups()}},computed:{getSortedSavedGroups(){const e=[...this.savedGroups];return e.sort((e,t)=>e.name.localeCompare(t.name)),e},getLoadGroupButtonDisabled(){return this.isLoadingGroup},getSearchAchievementsButtonDisabled(){return this.isSearchingAchievements},getSearchCollectionsButtonDisabled(){return this.isSearchingCollections},getCharAchievements(){const e=[],t=this.filterAchievementText.trim(),a=""==t?null:new RegExp(t,"i");for(const i of this.achievements){const t={...i,chars:[]};let n=i.id;t.gameLink=`\\aACH ${n}:${i.name}\\/a`,e.push(t);for(const e of this.chars){let n=!1;a&&e.name.match(a)&&(n=!0);const l=this.findCharAchievement(e,i.id),c={name:e.name,completed:!1,completedCount:0,stepCount:t.stepCount,tooltip:""};let d="",u=!1;if(null!=l)if(c.completed=0!=l.completed_timestamp,c.completed)c.completedCount=i.stepCount;else{var r;const e=null!==(r=l.event_list)&&void 0!==r?r:[];for(let a=0;a<e.length;a++){var o,s;c.completedCount+=null!==(o=e[a].count)&&void 0!==o?o:0,a<(null!==(s=t.steps)&&void 0!==s?s:[]).length&&e[a].count<t.steps[a].quota&&(c.tooltip+=`<span class="step-needed">${t.steps[a].desc}</span>`,d+=t.steps[a].desc)}}else if(t.steps)for(const e of t.steps)c.tooltip+=`<span class="step-needed">${e.desc}</span>`,d+=e.desc;a&&d&&d.match(a)&&(u=!0),(!a||n||u)&&t.chars.push(c)}switch(this.sortAchievements){case"name":t.chars.sort((e,t)=>e.name.localeCompare(t.name));break;case"completion":t.chars.sort((e,t)=>t.completedCount==e.completedCount?e.name.localeCompare(t.name):t.completedCount>e.completedCount?-1:1);break}}return e},getCharCollections(){const e=[],t=this.filterCollectionText.trim(),a=""==t?null:new RegExp(t,"i");for(const s of this.collections){const t={...s,chars:[]};e.push(t);for(const e of this.chars){let i=!1;a&&e.name.match(a)&&(i=!0);const n=this.findCharCollection(e,s.id),l={name:e.name,completed:!1,completedCount:0,itemCount:t.itemCount,tooltip:""};let c="",d=!1;if(null!=n)if(l.completed=n.collectedIds.length==t.itemCount,l.completed)l.completedCount=t.itemCount;else{l.completedCount=n.collectedIds.length;for(const e of null!==(r=t.items)&&void 0!==r?r:[]){var r;n.collectedIds.includes(e.id)||(l.tooltip+=`<span class="item-needed">${e.name}</span>`,c+=e.name)}}else for(const e of null!==(o=t.items)&&void 0!==o?o:[]){var o;l.tooltip+=`<span class="item-needed">${e.name}</span>`,c+=e.name}a&&c&&c.match(a)&&(d=!0),(!a||i||d)&&t.chars.push(l)}switch(this.sortCollections){case"name":t.chars.sort((e,t)=>e.name.localeCompare(t.name));break;case"completion":t.chars.sort((e,t)=>t.completedCount==e.completedCount?e.name.localeCompare(t.name):t.completedCount>e.completedCount?-1:1);break}}return e},getCharGear(){const e={chars:[]};for(const r of this.chars){var t,a;const o={name:r.name,server:r.server,resolve:null!==(t=null===(a=r.resolve)||void 0===a?void 0:a.total)&&void 0!==t?t:0,cbocCount:0,emptyAdornCount:r.checkup.emptyAdorns,oldAdornCount:r.checkup.oldAdorns,purpleAdornCount:0,rendingAdorns:r.checkup.rendingAdorns,plumage:r.checkup.plumage};for(const e in r.gear)r.gear[e].cboc&&!r.gear[e].isWeapon&&o.cbocCount++,o.purpleAdornCount+=r.gear[e].adorns.purple.count;e.chars.push(o)}switch(this.sortGear){case"name":e.chars.sort((e,t)=>e.name.localeCompare(t.name));break;case"resolve":e.chars.sort((e,t)=>t.resolve>e.resolve?-1:1);break;case"cboc":e.chars.sort((e,t)=>t.cbocCount==e.cbocCount?e.name.localeCompare(t.name):t.cbocCount>e.cbocCount?-1:1);break;case"badAdorns":e.chars.sort((e,t)=>t.emptyAdornCount+t.oldAdornCount==e.emptyAdornCount+e.oldAdornCount?e.name.localeCompare(t.name):t.emptyAdornCount+t.oldAdornCount>e.emptyAdornCount+e.oldAdornCount?-1:1);break;case"purpleAdorns":e.chars.sort((e,t)=>t.purpleAdornCount==e.purpleAdornCount?e.name.localeCompare(t.name):t.purpleAdornCount>e.purpleAdornCount?-1:1);break;case"rending":e.chars.sort((e,t)=>e.rendingAdorns.length==t.rendingAdorns.length?e.rendingAdorns.localeCompare(t.rendingAdorns):e.rendingAdorns.length>t.rendingAdorns.length?1:-1);break;case"plumage":e.chars.sort((e,t)=>t.plumage==e.plumage?e.name.localeCompare(t.name):e.plumage.localeCompare(t.plumage));break}return e}},methods:{loadAchievementsFromStorage(){var e;this.achievements.splice(0,this.achievements.length),this.achievements.push(...JSON.parse(null!==(e=g("app.working.achievements"))&&void 0!==e?e:"[]"))},loadCollectionsFromStorage(){var e;this.collections.splice(0,this.collections.length),this.collections.push(...JSON.parse(null!==(e=g("app.working.collections"))&&void 0!==e?e:"[]"))},saveAchievementsToStorage(){m("app.working.achievements",JSON.stringify(this.achievements))},saveCollectionsToStorage(){m("app.working.collections",JSON.stringify(this.collections))},parseOpts:function(){const e=this.$route.query;if(e&&e.opts){const a=JSON.parse(atob(e.opts));var t;if(this.optsGroupName="",a.groupName)w(a.groupName,null!==(t=a.chars)&&void 0!==t?t:[]),this.optsGroupName=a.groupName;this.optsAchievementIds.splice(0,this.optsAchievementIds.count),a.achievements&&a.achievements.length>0&&this.optsAchievementIds.push(...a.achievements),this.optsCollectionIds.splice(0,this.optsCollectionIds.count),a.collections&&a.collections.length>0&&this.optsCollectionIds.push(...a.collections)}},loadPlayers:async function(e){if(e.length>0){this.apiSearch(),this.message=`Loading ${e.length} character${1==e.length?"":"s"}... (this can take a while)`;var t=[];for(const s of e)t.push(be(s));let a=[],r=[],o=await Promise.allSettled(t);o.forEach(e=>{"fulfilled"===e.status?a.push(e.value):("service_unavailable"===e.reason&&this.apiError(),r.push(e.value))}),a.sort((e,t)=>e.name.localeCompare(t.name)),this.chars=a,r.length>0?this.message=`Failed to load ${r.length} of ${e.length} characters`:this.message="",this.updateTitle(),this.updateLink()}else this.message=""},loadAchievements:async function(e){if(e.length>0){this.message=`Loading ${e.length} achievement${1==e.length?"":"s"}... (this can take a while)`;var t=[];for(const s of e)t.push(ae(s));let a=[],r=[],o=await Promise.allSettled(t);o.forEach(e=>{"fulfilled"===e.status?a.push(e.value):r.push(e.value)}),this.achievements=a,r.length>0?(this.message=`Failed to load ${r.length} of ${e.length} achievements`,r.forEach(e=>{console.error("Failed to load achievement",e)})):this.message="",this.updateTitle(),this.updateLink()}else this.message=""},loadCollections:async function(e){if(e.length>0){this.message=`Loading ${e.length} collection${1==e.length?"":"s"}... (this can take a while)`;var t=[];for(const s of e)t.push(oe(s));let a=[],r=[],o=await Promise.allSettled(t);o.forEach(e=>{"fulfilled"===e.status?a.push(e.value):r.push(e.value)}),this.collections=a,r.length>0?(this.message=`Failed to load ${r.length} of ${e.length} collections`,r.forEach(e=>{console.error("Failed to load collection",e)})):this.message="",this.updateTitle(),this.updateLink()}else this.message=""},apiError:function(){this.$emit("apiError")},apiSearch:function(){this.$emit("apiSearch")},getGroupCharIds(){return this.chars.map(e=>e.id)},updateTitle:function(e){var t;e||(e=`Report for ${null!==(t=this.selectedGroupName)&&void 0!==t?t:"Unknown"} (${this.chars.length} chars)`);document.title=e+" | eq2cmp"},updateLink:function(){var e;const t={chars:this.chars.map(e=>e.id),groupName:null!==(e=this.selectedGroupName)&&void 0!==e?e:"",achievements:this.achievements.map(e=>e.id),collections:this.collections.map(e=>e.id)},a=btoa(JSON.stringify(t));this.$emit("newLink",`${window.location.origin}${s["publicPath"]}report?opts=${a}`)},async loadSelectedGroup(){if(this.isLoadingGroup=!0,this.selectedGroupName){const e=_(this.selectedGroupName);if(e){const t=e.ids||[];await this.loadPlayers(t),this.updateTitle(),this.updateLink()}}this.isLoadingGroup=!1},loadSavedGroups(){this.savedGroups.splice(0,this.savedGroups.length),this.savedGroups.push(...b())},searchAchievements:async function(){this.foundAchievements=[],this.isSearchingAchievements=!0,this.apiSearch();try{const e=await re(this.searchAchievementText);this.foundAchievements=e}catch(e){"service_unavailable"===e&&this.apiError()}this.isSearchingAchievements=!1},searchCollections:async function(){this.foundCollections=[],this.isSearchingCollections=!0,this.apiSearch();try{const e=await se(this.searchCollectionText);this.foundCollections=e}catch(e){"service_unavailable"===e&&this.apiError()}this.isSearchingCollections=!1},achievementIsSelected(e){for(const t of this.achievements)if(t.id==e.id)return!0;return!1},collectionIsSelected(e){for(const t of this.collections)if(t.id==e.id)return!0;return!1},addAchievement(e){this.achievementIsSelected(e)||(this.achievements.push(e),this.saveAchievementsToStorage(),this.updateLink())},addCollection(e){this.collectionIsSelected(e)||(this.collections.push(e),this.saveCollectionsToStorage(),this.updateLink())},removeAchievement(e){let t=-1;for(let a=0;a<this.achievements.length;a++)if(this.achievements[a].id==e.id){t=a;break}t>=0&&(this.achievements.splice(t,1),this.saveAchievementsToStorage())},removeCollection(e){let t=-1;for(let a=0;a<this.collections.length;a++)if(this.collections[a].id==e.id){t=a;break}t>=0&&(this.collections.splice(t,1),this.saveCollectionsToStorage())},findCharAchievement(e,t){for(const a of e.achievements)if(a.id==t)return a;return null},findCharCollection(e,t){for(const a of e.collections)if(a.id==t)return a;return null},getCharLink:function(e){return null!=e?`${window.location.origin}${s["publicPath"]}?char=${e.server}.${e.name}&autoload`:""},copyAchievementLink:function(e,t){const a=t.target.innerHTML;t.target.innerHTML="Copied",setTimeout(()=>{t.target.innerHTML=a},1e3),navigator.clipboard.writeText(e.gameLink)},copyCollectionLink:function(e,t){const a=t.target.innerHTML;t.target.innerHTML="Copied",setTimeout(()=>{t.target.innerHTML=a},1e3),navigator.clipboard.writeText(e.gameLink)}}},gt=ft,bt=(a("c363"),a("2e05"),Object(G["a"])(gt,pt,mt,!1,null,"a018a8ac",null)),_t=bt.exports;r["a"].config.productionTip=!1,J["c"].add(q["f"]),J["c"].add(q["c"]),J["c"].add(q["b"]),J["c"].add(q["e"]),J["c"].add(q["i"]),J["c"].add(H["a"]),J["c"].add(q["h"]),J["c"].add(q["j"]),J["c"].add(q["g"]),J["c"].add(q["a"]),J["c"].add(q["d"]),r["a"].component("font-awesome-icon",U["a"]),r["a"].use(o["a"]);const Ct=[{path:"/group/:players*",component:ht,props:!0},{path:"/group",component:ht},{path:"/report",component:_t},{path:"*",component:tt}],yt=new o["a"]({routes:Ct,mode:"history",base:s["publicPath"]});new r["a"]({router:yt,store:j,render:e=>e(T)}).$mount("#app")},"5ba9":function(e,t,a){},"5f35":function(e,t,a){var r="/";e.exports={publicPath:r}},"81e8":function(e,t,a){},"881c":function(e,t,a){"use strict";a("81e8")},"8a08":function(e,t,a){"use strict";a("9c58")},"8fc9":function(e,t,a){"use strict";a("a342")},"96a7":function(e,t,a){},"9c58":function(e,t,a){},a342:function(e,t,a){},b42b:function(e,t,a){},b959:function(e,t,a){},c12f:function(e,t,a){"use strict";a("b959")},c363:function(e,t,a){"use strict";a("d904")},cc60:function(e,t,a){"use strict";a("b42b")},d904:function(e,t,a){},e9ab:function(e,t,a){}});
//# sourceMappingURL=app.aec861f7.js.map